{
	"info": {
		"_postman_id": "discord-sns-messaging-collection",
		"name": "Discord SNS Messaging API Test Collection",
		"description": "Discord SNS ë©”ì‹œì§• ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ Postman Collection",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Discord Simple Text Message",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Response has success field\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('success');",
							"    pm.expect(jsonData.success).to.be.true;",
							"});",
							"",
							"pm.test(\"Response has messageId\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('messageId');",
							"    pm.expect(jsonData.messageId).to.not.be.empty;",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"messageId\": \"DISCORD-SIMPLE-{{$randomUUID}}\",\n  \"type\": \"FACEBOOK_MESSENGER\",\n  \"sender\": \"POSTMAN_TEST\",\n  \"content\": \"ì•ˆë…•í•˜ì„¸ìš”! Discord í…ìŠ¤íŠ¸ ë©”ì‹œì§€ í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤.\",\n  \"webhookUrl\": \"{{DISCORD_WEBHOOK_URL}}\",\n  \"isEmbed\": false\n}"
				},
				"url": {
					"raw": "{{BASE_URL}}/api/v1/messaging/unified/send",
					"host": [
						"{{BASE_URL}}"
					],
					"path": [
						"api",
						"v1",
						"messaging",
						"unified",
						"send"
					]
				}
			},
			"response": []
		},
		{
			"name": "Discord Embed Message",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Response indicates success\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.success).to.be.true;",
							"});",
							"",
							"pm.test(\"Embed message sent successfully\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.vendorMessageId).to.contain('DISCORD');",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"messageId\": \"DISCORD-EMBED-{{$randomUUID}}\",\n  \"type\": \"FACEBOOK_MESSENGER\",\n  \"sender\": \"POSTMAN_TEST\",\n  \"content\": \"ì‹œìŠ¤í…œ ìƒíƒœ ì•Œë¦¼\",\n  \"webhookUrl\": \"{{DISCORD_WEBHOOK_URL}}\",\n  \"isEmbed\": true,\n  \"title\": \"ì„œë²„ ëª¨ë‹ˆí„°ë§ ì•Œë¦¼\",\n  \"description\": \"í˜„ì¬ ì„œë²„ ìƒíƒœ ì •ë³´ì…ë‹ˆë‹¤.\",\n  \"color\": \"#00ff00\",\n  \"thumbnailUrl\": \"https://example.com/server-icon.png\",\n  \"imageUrl\": \"https://example.com/server-status.png\",\n  \"fields\": [\n    {\n      \"name\": \"CPU ì‚¬ìš©ë¥ \",\n      \"value\": \"75%\",\n      \"inline\": true\n    },\n    {\n      \"name\": \"ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ \",\n      \"value\": \"60%\",\n      \"inline\": true\n    },\n    {\n      \"name\": \"ë””ìŠ¤í¬ ì‚¬ìš©ë¥ \",\n      \"value\": \"45%\",\n      \"inline\": true\n    },\n    {\n      \"name\": \"ì‘ë‹µ ì‹œê°„\",\n      \"value\": \"250ms\",\n      \"inline\": false\n    }\n  ]\n}"
				},
				"url": {
					"raw": "{{BASE_URL}}/api/v1/messaging/unified/send",
					"host": [
						"{{BASE_URL}}"
					],
					"path": [
						"api",
						"v1",
						"messaging",
						"unified",
						"send"
					]
				}
			},
			"response": []
		},
		{
			"name": "Discord Message with Buttons",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Button message sent successfully\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.success).to.be.true;",
							"    pm.expect(jsonData).to.have.property('vendorMessageId');",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"messageId\": \"DISCORD-BUTTONS-{{$randomUUID}}\",\n  \"type\": \"FACEBOOK_MESSENGER\",\n  \"sender\": \"POSTMAN_TEST\",\n  \"content\": \"ì‘ì—…ì„ ì„ íƒí•´ì£¼ì„¸ìš”.\",\n  \"webhookUrl\": \"{{DISCORD_WEBHOOK_URL}}\",\n  \"isEmbed\": false,\n  \"buttons\": [\n    {\n      \"type\": \"LINK\",\n      \"label\": \"ëŒ€ì‹œë³´ë“œ ì—´ê¸°\",\n      \"url\": \"https://dashboard.example.com\"\n    },\n    {\n      \"type\": \"PRIMARY\",\n      \"label\": \"ì‘ì—… ì‹œì‘\",\n      \"callbackData\": \"start_task\"\n    },\n    {\n      \"type\": \"DANGER\",\n      \"label\": \"ì‘ì—… ì¤‘ë‹¨\",\n      \"callbackData\": \"stop_task\"\n    }\n  ]\n}"
				},
				"url": {
					"raw": "{{BASE_URL}}/api/v1/messaging/unified/send",
					"host": [
						"{{BASE_URL}}"
					],
					"path": [
						"api",
						"v1",
						"messaging",
						"unified",
						"send"
					]
				}
			},
			"response": []
		},
		{
			"name": "Discord Complex Embed with Buttons",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Complex message sent successfully\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.success).to.be.true;",
							"});",
							"",
							"pm.test(\"Response time is less than 5000ms\", function () {",
							"    pm.expect(pm.response.responseTime).to.be.below(5000);",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"messageId\": \"DISCORD-COMPLEX-{{$randomUUID}}\",\n  \"type\": \"FACEBOOK_MESSENGER\",\n  \"sender\": \"POSTMAN_TEST\",\n  \"content\": \"ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸ ì•Œë¦¼\",\n  \"webhookUrl\": \"{{DISCORD_WEBHOOK_URL}}\",\n  \"isEmbed\": true,\n  \"title\": \"ğŸš€ ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸ v2.1.0\",\n  \"description\": \"ìƒˆë¡œìš´ ê¸°ëŠ¥ê³¼ ê°œì„ ì‚¬í•­ì´ í¬í•¨ëœ ì—…ë°ì´íŠ¸ê°€ ì¶œì‹œë˜ì—ˆìŠµë‹ˆë‹¤.\",\n  \"color\": \"#ff6600\",\n  \"thumbnailUrl\": \"https://example.com/update-icon.png\",\n  \"imageUrl\": \"https://example.com/release-banner.png\",\n  \"fields\": [\n    {\n      \"name\": \"ğŸ“¦ ë²„ì „\",\n      \"value\": \"v2.1.0\",\n      \"inline\": true\n    },\n    {\n      \"name\": \"ğŸ“… ë¦´ë¦¬ì¦ˆ ë‚ ì§œ\",\n      \"value\": \"2024-01-15\",\n      \"inline\": true\n    },\n    {\n      \"name\": \"â­ ì£¼ìš” ë³€ê²½ì‚¬í•­\",\n      \"value\": \"â€¢ Discord SNS í†µí•©\\nâ€¢ ì„±ëŠ¥ ê°œì„ \\nâ€¢ ë²„ê·¸ ìˆ˜ì •\",\n      \"inline\": false\n    },\n    {\n      \"name\": \"ğŸ”— ë¬¸ì„œ\",\n      \"value\": \"[ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸](https://example.com/release-notes)\\n[API ë¬¸ì„œ](https://example.com/api-docs)\",\n      \"inline\": false\n    }\n  ],\n  \"buttons\": [\n    {\n      \"type\": \"SUCCESS\",\n      \"label\": \"ì§€ê¸ˆ ì—…ë°ì´íŠ¸\",\n      \"callbackData\": \"update_now\"\n    },\n    {\n      \"type\": \"SECONDARY\",\n      \"label\": \"ë‚˜ì¤‘ì— ì—…ë°ì´íŠ¸\",\n      \"callbackData\": \"update_later\"\n    },\n    {\n      \"type\": \"LINK\",\n      \"label\": \"ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸ ë³´ê¸°\",\n      \"url\": \"https://example.com/release-notes\"\n    },\n    {\n      \"type\": \"CALLBACK\",\n      \"label\": \"ì„¤ì • ë³€ê²½\",\n      \"callbackData\": \"open_settings\"\n    }\n  ]\n}"
				},
				"url": {
					"raw": "{{BASE_URL}}/api/v1/messaging/unified/send",
					"host": [
						"{{BASE_URL}}"
					],
					"path": [
						"api",
						"v1",
						"messaging",
						"unified",
						"send"
					]
				}
			},
			"response": []
		},
		{
			"name": "Discord Error Handling Test - Invalid Webhook",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 400 or 500\", function () {",
							"    pm.expect(pm.response.code).to.be.oneOf([400, 500]);",
							"});",
							"",
							"pm.test(\"Error response contains error information\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.success).to.be.false;",
							"    pm.expect(jsonData).to.have.property('errorCode');",
							"    pm.expect(jsonData).to.have.property('errorMessage');",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"messageId\": \"DISCORD-ERROR-{{$randomUUID}}\",\n  \"type\": \"FACEBOOK_MESSENGER\",\n  \"sender\": \"POSTMAN_TEST\",\n  \"content\": \"ì˜ëª»ëœ ì›¹í›… URL í…ŒìŠ¤íŠ¸\",\n  \"webhookUrl\": \"https://invalid-webhook-url.com/webhook\",\n  \"isEmbed\": false\n}"
				},
				"url": {
					"raw": "{{BASE_URL}}/api/v1/messaging/unified/send",
					"host": [
						"{{BASE_URL}}"
					],
					"path": [
						"api",
						"v1",
						"messaging",
						"unified",
						"send"
					]
				}
			},
			"response": []
		},
		{
			"name": "Message Status Check",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Status response contains valid status\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('status');",
							"    pm.expect(jsonData.status).to.be.oneOf(['PENDING', 'SENT', 'FAILED', 'DELIVERED']);",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{BASE_URL}}/api/v1/messaging/status/{{MESSAGE_ID}}",
					"host": [
						"{{BASE_URL}}"
					],
					"path": [
						"api",
						"v1",
						"messaging",
						"status",
						"{{MESSAGE_ID}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Health Check - Discord Strategy",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Health check shows system is healthy\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('healthy');",
							"    pm.expect(jsonData.healthy).to.be.true;",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{BASE_URL}}/api/v1/messaging/health",
					"host": [
						"{{BASE_URL}}"
					],
					"path": [
						"api",
						"v1",
						"messaging",
						"health"
					]
				}
			},
			"response": []
		},
		{
			"name": "Discord All Button Types Test",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"All button types handled correctly\", function () {",
							"    pm.response.to.have.status(200);",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.success).to.be.true;",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"messageId\": \"DISCORD-ALL-BUTTONS-{{$randomUUID}}\",\n  \"type\": \"FACEBOOK_MESSENGER\",\n  \"sender\": \"POSTMAN_TEST\",\n  \"content\": \"ëª¨ë“  ë²„íŠ¼ íƒ€ì… í…ŒìŠ¤íŠ¸\",\n  \"webhookUrl\": \"{{DISCORD_WEBHOOK_URL}}\",\n  \"isEmbed\": false,\n  \"buttons\": [\n    {\n      \"type\": \"PRIMARY\",\n      \"label\": \"Primary ë²„íŠ¼\",\n      \"callbackData\": \"primary_action\"\n    },\n    {\n      \"type\": \"SECONDARY\",\n      \"label\": \"Secondary ë²„íŠ¼\",\n      \"callbackData\": \"secondary_action\"\n    },\n    {\n      \"type\": \"SUCCESS\",\n      \"label\": \"Success ë²„íŠ¼\",\n      \"callbackData\": \"success_action\"\n    },\n    {\n      \"type\": \"DANGER\",\n      \"label\": \"Danger ë²„íŠ¼\",\n      \"callbackData\": \"danger_action\"\n    },\n    {\n      \"type\": \"LINK\",\n      \"label\": \"Link ë²„íŠ¼\",\n      \"url\": \"https://example.com\"\n    },\n    {\n      \"type\": \"CALLBACK\",\n      \"label\": \"Callback ë²„íŠ¼\",\n      \"callbackData\": \"callback_action\"\n    }\n  ]\n}"
				},
				"url": {
					"raw": "{{BASE_URL}}/api/v1/messaging/unified/send",
					"host": [
						"{{BASE_URL}}"
					],
					"path": [
						"api",
						"v1",
						"messaging",
						"unified",
						"send"
					]
				}
			},
			"response": []
		},
		{
			"name": "Discord Performance Test",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Response time is acceptable\", function () {",
							"    pm.expect(pm.response.responseTime).to.be.below(3000);",
							"});",
							"",
							"pm.test(\"High load message sent successfully\", function () {",
							"    pm.response.to.have.status(200);",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.success).to.be.true;",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"messageId\": \"DISCORD-PERF-{{$randomUUID}}\",\n  \"type\": \"FACEBOOK_MESSENGER\",\n  \"sender\": \"POSTMAN_PERF_TEST\",\n  \"content\": \"ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ìš© ë©”ì‹œì§€ì…ë‹ˆë‹¤.\",\n  \"webhookUrl\": \"{{DISCORD_WEBHOOK_URL}}\",\n  \"isEmbed\": true,\n  \"title\": \"ì„±ëŠ¥ í…ŒìŠ¤íŠ¸\",\n  \"description\": \"ì´ ë©”ì‹œì§€ëŠ” ì‹œìŠ¤í…œ ì„±ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•œ ê²ƒì…ë‹ˆë‹¤.\",\n  \"color\": \"#0099ff\",\n  \"fields\": [\n    {\n      \"name\": \"í…ŒìŠ¤íŠ¸ íƒ€ì…\",\n      \"value\": \"ì„±ëŠ¥ í…ŒìŠ¤íŠ¸\",\n      \"inline\": true\n    },\n    {\n      \"name\": \"ìš”ì²­ ì‹œê°„\",\n      \"value\": \"{{$timestamp}}\",\n      \"inline\": true\n    },\n    {\n      \"name\": \"í…ŒìŠ¤íŠ¸ ID\",\n      \"value\": \"{{$randomUUID}}\",\n      \"inline\": false\n    }\n  ],\n  \"buttons\": [\n    {\n      \"type\": \"SUCCESS\",\n      \"label\": \"í…ŒìŠ¤íŠ¸ ì™„ë£Œ\",\n      \"callbackData\": \"test_complete\"\n    }\n  ]\n}"
				},
				"url": {
					"raw": "{{BASE_URL}}/api/v1/messaging/unified/send",
					"host": [
						"{{BASE_URL}}"
					],
					"path": [
						"api",
						"v1",
						"messaging",
						"unified",
						"send"
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì „ í™˜ê²½ ë³€ìˆ˜ í™•ì¸",
					"if (!pm.environment.get(\"DISCORD_WEBHOOK_URL\")) {",
					"    console.warn(\"DISCORD_WEBHOOK_URL í™˜ê²½ ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\");",
					"}",
					"",
					"if (!pm.environment.get(\"BASE_URL\")) {",
					"    pm.environment.set(\"BASE_URL\", \"http://localhost:8080\");",
					"    console.log(\"BASE_URLì„ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •í–ˆìŠµë‹ˆë‹¤: http://localhost:8080\");",
					"}"
				]
			}
		}
	],
	"variable": [
		{
			"key": "BASE_URL",
			"value": "http://localhost:8080",
			"type": "string"
		},
		{
			"key": "DISCORD_WEBHOOK_URL",
			"value": "https://discord.com/api/webhooks/YOUR_WEBHOOK_ID/YOUR_WEBHOOK_TOKEN",
			"type": "string"
		},
		{
			"key": "MESSAGE_ID",
			"value": "SAMPLE-MESSAGE-ID",
			"type": "string"
		}
	]
}